version: 2
jobs:
  build:
    machine: true
    working_directory: $HOME/go/src/github.com/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME
    environment:
      GOPATH=$HOME/go
    steps:
      - checkout
      # update docker
      - run: docker version
      - run: sudo service docker stop
      - run: curl -fsSL https://get.docker.com/ | sudo sh
      - run: docker version
      - run: pwd
      - run: ls -al
      # - run: |
      #   cd $HOME/go
      #   ./test.sh


#  docker:
#       # specify the version
#       - image: circleci/golang:1.8
      
#       # Specify service dependencies here if necessary
#       # CircleCI maintains a library of pre-built images
#       # documented at https://circleci.com/docs/2.0/circleci-images/
#       # - image: circleci/postgres:9.4

#     #### TEMPLATE_NOTE: go expects specific checkout path representing url
#     #### expecting it in the form of
#     ####   /go/src/github.com/circleci/go-tool
#     ####   /go/src/bitbucket.org/circleci/go-tool
#     working_directory: /go/src/github.com/{{ORG_NAME}}/{{REPO_NAME}}
#     steps:
#       - checkout

#       # specify any bash command here prefixed with `run: `
#       # - run: go get -v -t -d ./...
#       - run: ./test.sh
